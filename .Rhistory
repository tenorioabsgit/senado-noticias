a
a[[2]]
a[[3]]
a[[4]]
a[[5]]
a[[6]]
a <- a[4:5]
a
a <- read_html(link) %>% html_nodes('ul')
a
a <- a[4:5]
a
a[1]
a[2]
a <- read_html(link) %>% html_nodes('ul')
a
a[[1]][4]
a[[1]]
read_html(link) %>% html_nodes('a') %>% html_attr('href'))
read_html(link) %>% html_nodes('a') %>% html_attr('href'))
read_html(link) %>% html_nodes('a') %>% html_attr('href')
link
library(rvest)
library(tidyverse)
termo_pesquisa <- 'Fernando Collor'
termo_pesquisa <- str_replace_all(string = termo_pesquisa,
pattern = ' ',
replacement = '+')
intervalo_urls <- seq(from = 0L,
to = 2010,
by = 30)
paste0('https://www12.senado.leg.br/noticias/busca?b_start:int=',i,'&SearchableText=',termo_pesquisa)
paste0('https://www12.senado.leg.br/noticias/busca?b_start:int=0&SearchableText=',termo_pesquisa)
read_html(link) %>% html_nodes('a') %>% html_attr('href')
a
a
a <- read_html(link) %>% html_nodes('a') %>% html_attr('href')
a
termo_pesquisa <- 'Fernando Collor'
termo_pesquisa <- str_replace_all(string = termo_pesquisa,
pattern = ' ',
replacement = '%20')
library(rvest)
library(tidyverse)
termo_pesquisa <- 'Fernando Collor'
termo_pesquisa <- str_replace_all(string = termo_pesquisa,
pattern = ' ',
replacement = '%20')
intervalo_urls <- seq(from = 0L,
to = 2010,
by = 30)
base_links <- data.frame()
for (i in intervalo_urls) {
link <- paste0('https://www12.senado.leg.br/noticias/@@busca?b_start:int=',intervalo_urls,'&end_date=&portal_type:list=Collection&portal_type:list=noticias.AbaEditoria&portal_type:list=noticias.Audio&portal_type:list=noticias.Banner&portal_type:list=noticias.Infografico&portal_type:list=noticias.Infomateria&portal_type:list=noticias.Materia&portal_type:list=noticias.Microblog&portal_type:list=noticias.MicroblogPost&portal_type:list=noticias.Video&portal_type:list=vocabulario.RegistroVocabularios&portal_type:list=vocabulario.TermoVocabulario&portal_type:list=vocabulario.Vocabulario&btnBuscaAvancada=&start_date=&SearchableText=',termo_pesquisa)
lista <- as.data.frame(read_html(link) %>% html_nodes('a') %>% html_attr('href'))
colnames(lista) <- 'link_col'
busca_link <- lista %>% filter(str_detect(link_col, 'https://www12.senado.leg.br/noticias/materias/'))
base_links <- bind_rows(base_links,busca_link)
}
library(rvest)
library(tidyverse)
termo_pesquisa <- 'Fernando Collor'
termo_pesquisa <- str_replace_all(string = termo_pesquisa,
pattern = ' ',
replacement = '%20')
intervalo_urls <- seq(from = 0L,
to = 2010,
by = 30)
base_links <- data.frame()
for (i in intervalo_urls) {
link <- paste0('https://www12.senado.leg.br/noticias/@@busca?b_start:int=',intervalo_urls,'&end_date=&portal_type:list=Collection&portal_type:list=noticias.AbaEditoria&portal_type:list=noticias.Audio&portal_type:list=noticias.Banner&portal_type:list=noticias.Infografico&portal_type:list=noticias.Infomateria&portal_type:list=noticias.Materia&portal_type:list=noticias.Microblog&portal_type:list=noticias.MicroblogPost&portal_type:list=noticias.Video&portal_type:list=vocabulario.RegistroVocabularios&portal_type:list=vocabulario.TermoVocabulario&portal_type:list=vocabulario.Vocabulario&btnBuscaAvancada=&start_date=&SearchableText=',termo_pesquisa)
lista <- as.data.frame(read_html(link) %>% html_nodes('a') %>% html_attr('href'))
colnames(lista) <- 'link_col'
busca_link <- lista %>% filter(str_detect(link_col, 'https://www12.senado.leg.br/noticias/materias/'))
base_links <- bind_rows(base_links,busca_link)
}
for (i in intervalo_urls) {
link <- paste0('https://www12.senado.leg.br/noticias/@@busca?b_start:int=',intervalo_urls,'&end_date=&portal_type:list=Collection&portal_type:list=noticias.AbaEditoria&portal_type:list=noticias.Audio&portal_type:list=noticias.Banner&portal_type:list=noticias.Infografico&portal_type:list=noticias.Infomateria&portal_type:list=noticias.Materia&portal_type:list=noticias.Microblog&portal_type:list=noticias.MicroblogPost&portal_type:list=noticias.Video&portal_type:list=vocabulario.RegistroVocabularios&portal_type:list=vocabulario.TermoVocabulario&portal_type:list=vocabulario.Vocabulario&btnBuscaAvancada=&start_date=&SearchableText=',termo_pesquisa)
lista <- as.data.frame(read_html(link) %>% html_nodes('a') %>% html_attr('href'))
colnames(lista) <- 'link_col'
busca_link <- lista %>% filter(str_detect(link_col, 'https://www12.senado.leg.br/noticias/materias/'))
base_links <- bind_rows(base_links,busca_link)
}
link <- paste0('https://www12.senado.leg.br/noticias/@@busca?b_start:int=',intervalo_urls,'&end_date=&portal_type:list=Collection&portal_type:list=noticias.AbaEditoria&portal_type:list=noticias.Audio&portal_type:list=noticias.Banner&portal_type:list=noticias.Infografico&portal_type:list=noticias.Infomateria&portal_type:list=noticias.Materia&portal_type:list=noticias.Microblog&portal_type:list=noticias.MicroblogPost&portal_type:list=noticias.Video&portal_type:list=vocabulario.RegistroVocabularios&portal_type:list=vocabulario.TermoVocabulario&portal_type:list=vocabulario.Vocabulario&btnBuscaAvancada=&start_date=&SearchableText=',termo_pesquisa)
lista <- as.data.frame(read_html(link) %>% html_nodes('a') %>% html_attr('href'))
link
base_links <- data.frame()
for (i in intervalo_urls) {
link <- paste0('https://www12.senado.leg.br/noticias/@@busca?b_start:int=',intervalo_urls,'&end_date=&portal_type:list=Collection&portal_type:list=noticias.AbaEditoria&portal_type:list=noticias.Audio&portal_type:list=noticias.Banner&portal_type:list=noticias.Infografico&portal_type:list=noticias.Infomateria&portal_type:list=noticias.Materia&portal_type:list=noticias.Microblog&portal_type:list=noticias.MicroblogPost&portal_type:list=noticias.Video&portal_type:list=vocabulario.RegistroVocabularios&portal_type:list=vocabulario.TermoVocabulario&portal_type:list=vocabulario.Vocabulario&btnBuscaAvancada=&start_date=&SearchableText=',termo_pesquisa)
lista <- as.data.frame(read_html(link) %>% html_nodes('a') %>% html_attr('href'))
colnames(lista) <- 'link_col'
busca_link <- lista %>% filter(str_detect(link_col, 'https://www12.senado.leg.br/noticias/materias/'))
base_links <- bind_rows(base_links,busca_link)
}
library(rvest)
library(tidyverse)
termo_pesquisa <- 'Fernando Collor'
termo_pesquisa <- str_replace_all(string = termo_pesquisa,
pattern = ' ',
replacement = '%20')
intervalo_urls <- seq(from = 0L,
to = 2010,
by = 30)
link <- paste0('https://www12.senado.leg.br/noticias/@@busca?b_start:int=',intervalo_urls,'&end_date=&portal_type:list=Collection&portal_type:list=noticias.AbaEditoria&portal_type:list=noticias.Audio&portal_type:list=noticias.Banner&portal_type:list=noticias.Infografico&portal_type:list=noticias.Infomateria&portal_type:list=noticias.Materia&portal_type:list=noticias.Microblog&portal_type:list=noticias.MicroblogPost&portal_type:list=noticias.Video&portal_type:list=vocabulario.RegistroVocabularios&portal_type:list=vocabulario.TermoVocabulario&portal_type:list=vocabulario.Vocabulario&btnBuscaAvancada=&start_date=&SearchableText=',termo_pesquisa)
i = 0
link <- paste0('https://www12.senado.leg.br/noticias/@@busca?b_start:int=',intervalo_urls,'&end_date=&portal_type:list=Collection&portal_type:list=noticias.AbaEditoria&portal_type:list=noticias.Audio&portal_type:list=noticias.Banner&portal_type:list=noticias.Infografico&portal_type:list=noticias.Infomateria&portal_type:list=noticias.Materia&portal_type:list=noticias.Microblog&portal_type:list=noticias.MicroblogPost&portal_type:list=noticias.Video&portal_type:list=vocabulario.RegistroVocabularios&portal_type:list=vocabulario.TermoVocabulario&portal_type:list=vocabulario.Vocabulario&btnBuscaAvancada=&start_date=&SearchableText=',termo_pesquisa)
lista <- as.data.frame(read_html(link) %>% html_nodes('a') %>% html_attr('href'))
lista <- as.data.frame(read_html(link) %>% html_nodes('a'))
lista <- as.data.frame(read_html(link))
lista <- read_html(link)
link
base_links <- data.frame()
for (i in intervalo_urls) {
link <- paste0('https://www12.senado.leg.br/noticias/busca?b_start:int=',i,'&SearchableText=',termo_pesquisa)
lista <- as.data.frame(read_html(link) %>% html_nodes('a') %>% html_attr('href'))
colnames(lista) <- 'link_col'
busca_link <- lista %>% filter(str_detect(link_col, 'https://www12.senado.leg.br/noticias/materias/'))
base_links <- bind_rows(base_links,busca_link)
}
termo_pesquisa
termo_pesquisa
link <- paste0('https://www12.senado.leg.br/noticias/@@busca?b_start:int=',intervalo_urls',&end_date=&portal_type:list=Collection&portal_type:list=noticias.AbaEditoria&portal_type:list=noticias.Audio&portal_type:list=noticias.Banner&portal_type:list=noticias.Infografico&portal_type:list=noticias.Infomateria&portal_type:list=noticias.Materia&portal_type:list=noticias.Microblog&portal_type:list=noticias.MicroblogPost&portal_type:list=noticias.Video&portal_type:list=vocabulario.RegistroVocabularios&portal_type:list=vocabulario.TermoVocabulario&portal_type:list=vocabulario.Vocabulario&btnBuscaAvancada=&start_date=&SearchableText=',termo_pesquisa)
link <- paste0('https://www12.senado.leg.br/noticias/@@busca?b_start:int=',intervalo_urls',&end_date=&portal_type:list=Collection&portal_type:list=noticias.AbaEditoria&portal_type:list=noticias.Audio&portal_type:list=noticias.Banner&portal_type:list=noticias.Infografico&portal_type:list=noticias.Infomateria&portal_type:list=noticias.Materia&portal_type:list=noticias.Microblog&portal_type:list=noticias.MicroblogPost&portal_type:list=noticias.Video&portal_type:list=vocabulario.RegistroVocabularios&portal_type:list=vocabulario.TermoVocabulario&portal_type:list=vocabulario.Vocabulario&btnBuscaAvancada=&start_date=&SearchableText=',termo_pesquisa)
termo_pesquisa
link <- paste0('https://www12.senado.leg.br/noticias/@@busca?b_start:int=',intervalo_urls',&end_date=&portal_type:list=Collection&portal_type:list=noticias.AbaEditoria&portal_type:list=noticias.Audio&portal_type:list=noticias.Banner&portal_type:list=noticias.Infografico&portal_type:list=noticias.Infomateria&portal_type:list=noticias.Materia&portal_type:list=noticias.Microblog&portal_type:list=noticias.MicroblogPost&portal_type:list=noticias.Video&portal_type:list=vocabulario.RegistroVocabularios&portal_type:list=vocabulario.TermoVocabulario&portal_type:list=vocabulario.Vocabulario&btnBuscaAvancada=&start_date=&SearchableText=',termo_pesquisa)
link <- paste0('https://www12.senado.leg.br/noticias/@@busca?b_start:int=',intervalo_urls,'&end_date=&portal_type:list=Collection&portal_type:list=noticias.AbaEditoria&portal_type:list=noticias.Audio&portal_type:list=noticias.Banner&portal_type:list=noticias.Infografico&portal_type:list=noticias.Infomateria&portal_type:list=noticias.Materia&portal_type:list=noticias.Microblog&portal_type:list=noticias.MicroblogPost&portal_type:list=noticias.Video&portal_type:list=vocabulario.RegistroVocabularios&portal_type:list=vocabulario.TermoVocabulario&portal_type:list=vocabulario.Vocabulario&btnBuscaAvancada=&start_date=&SearchableText=',termo_pesquisa)
lista
lista[83]
lista[[83]]
intervalo_urls <- 0
link <- paste0('https://www12.senado.leg.br/noticias/@@busca?b_start:int=',intervalo_urls,'&end_date=&portal_type:list=Collection&portal_type:list=noticias.AbaEditoria&portal_type:list=noticias.Audio&portal_type:list=noticias.Banner&portal_type:list=noticias.Infografico&portal_type:list=noticias.Infomateria&portal_type:list=noticias.Materia&portal_type:list=noticias.Microblog&portal_type:list=noticias.MicroblogPost&portal_type:list=noticias.Video&portal_type:list=vocabulario.RegistroVocabularios&portal_type:list=vocabulario.TermoVocabulario&portal_type:list=vocabulario.Vocabulario&btnBuscaAvancada=&start_date=&SearchableText=',termo_pesquisa)
link <- paste0('https://www12.senado.leg.br/noticias/@@busca?b_start:int=',intervalo_urls,'&end_date=&portal_type:list=Collection&portal_type:list=noticias.AbaEditoria&portal_type:list=noticias.Audio&portal_type:list=noticias.Banner&portal_type:list=noticias.Infografico&portal_type:list=noticias.Infomateria&portal_type:list=noticias.Materia&portal_type:list=noticias.Microblog&portal_type:list=noticias.MicroblogPost&portal_type:list=noticias.Video&portal_type:list=vocabulario.RegistroVocabularios&portal_type:list=vocabulario.TermoVocabulario&portal_type:list=vocabulario.Vocabulario&btnBuscaAvancada=&start_date=&SearchableText=',termo_pesquisa)
paste0('https://www12.senado.leg.br/noticias/@@busca?b_start:int=',intervalo_urls,'&end_date=&portal_type:list=Collection&portal_type:list=noticias.AbaEditoria&portal_type:list=noticias.Audio&portal_type:list=noticias.Banner&portal_type:list=noticias.Infografico&portal_type:list=noticias.Infomateria&portal_type:list=noticias.Materia&portal_type:list=noticias.Microblog&portal_type:list=noticias.MicroblogPost&portal_type:list=noticias.Video&portal_type:list=vocabulario.RegistroVocabularios&portal_type:list=vocabulario.TermoVocabulario&portal_type:list=vocabulario.Vocabulario&btnBuscaAvancada=&start_date=&SearchableText=',termo_pesquisa)
for (i in intervalo_urls) {
link <- paste0('https://www12.senado.leg.br/noticias/@@busca?b_start:int=',intervalo_urls,'&end_date=&portal_type:list=Collection&portal_type:list=noticias.AbaEditoria&portal_type:list=noticias.Audio&portal_type:list=noticias.Banner&portal_type:list=noticias.Infografico&portal_type:list=noticias.Infomateria&portal_type:list=noticias.Materia&portal_type:list=noticias.Microblog&portal_type:list=noticias.MicroblogPost&portal_type:list=noticias.Video&portal_type:list=vocabulario.RegistroVocabularios&portal_type:list=vocabulario.TermoVocabulario&portal_type:list=vocabulario.Vocabulario&btnBuscaAvancada=&start_date=&SearchableText=',termo_pesquisa)
lista <- as.data.frame(read_html(link) %>% html_nodes('a') %>% html_attr('href'))
colnames(lista) <- 'link_col'
busca_link <- lista %>% filter(str_detect(link_col, 'https://www12.senado.leg.br/noticias/materias/'))
base_links <- bind_rows(base_links,busca_link)
}
for (i in intervalo_urls) {
print(i)
# link <- paste0('https://www12.senado.leg.br/noticias/@@busca?b_start:int=',intervalo_urls,'&end_date=&portal_type:list=Collection&portal_type:list=noticias.AbaEditoria&portal_type:list=noticias.Audio&portal_type:list=noticias.Banner&portal_type:list=noticias.Infografico&portal_type:list=noticias.Infomateria&portal_type:list=noticias.Materia&portal_type:list=noticias.Microblog&portal_type:list=noticias.MicroblogPost&portal_type:list=noticias.Video&portal_type:list=vocabulario.RegistroVocabularios&portal_type:list=vocabulario.TermoVocabulario&portal_type:list=vocabulario.Vocabulario&btnBuscaAvancada=&start_date=&SearchableText=',termo_pesquisa)
# lista <- as.data.frame(read_html(link) %>% html_nodes('a') %>% html_attr('href'))
# colnames(lista) <- 'link_col'
# busca_link <- lista %>% filter(str_detect(link_col, 'https://www12.senado.leg.br/noticias/materias/'))
# base_links <- bind_rows(base_links,busca_link)
}
for (i in intervalo_urls) {
print(i)
# link <- paste0('https://www12.senado.leg.br/noticias/@@busca?b_start:int=',intervalo_urls,'&end_date=&portal_type:list=Collection&portal_type:list=noticias.AbaEditoria&portal_type:list=noticias.Audio&portal_type:list=noticias.Banner&portal_type:list=noticias.Infografico&portal_type:list=noticias.Infomateria&portal_type:list=noticias.Materia&portal_type:list=noticias.Microblog&portal_type:list=noticias.MicroblogPost&portal_type:list=noticias.Video&portal_type:list=vocabulario.RegistroVocabularios&portal_type:list=vocabulario.TermoVocabulario&portal_type:list=vocabulario.Vocabulario&btnBuscaAvancada=&start_date=&SearchableText=',termo_pesquisa)
# lista <- as.data.frame(read_html(link) %>% html_nodes('a') %>% html_attr('href'))
# colnames(lista) <- 'link_col'
# busca_link <- lista %>% filter(str_detect(link_col, 'https://www12.senado.leg.br/noticias/materias/'))
# base_links <- bind_rows(base_links,busca_link)
}
for (i in intervalo_urls) {
print(i)
# link <- paste0('https://www12.senado.leg.br/noticias/@@busca?b_start:int=',intervalo_urls,'&end_date=&portal_type:list=Collection&portal_type:list=noticias.AbaEditoria&portal_type:list=noticias.Audio&portal_type:list=noticias.Banner&portal_type:list=noticias.Infografico&portal_type:list=noticias.Infomateria&portal_type:list=noticias.Materia&portal_type:list=noticias.Microblog&portal_type:list=noticias.MicroblogPost&portal_type:list=noticias.Video&portal_type:list=vocabulario.RegistroVocabularios&portal_type:list=vocabulario.TermoVocabulario&portal_type:list=vocabulario.Vocabulario&btnBuscaAvancada=&start_date=&SearchableText=',termo_pesquisa)
# lista <- as.data.frame(read_html(link) %>% html_nodes('a') %>% html_attr('href'))
# colnames(lista) <- 'link_col'
# busca_link <- lista %>% filter(str_detect(link_col, 'https://www12.senado.leg.br/noticias/materias/'))
# base_links <- bind_rows(base_links,busca_link)
}
for (i in intervalo_urls) {
print(i)
# link <- paste0('https://www12.senado.leg.br/noticias/@@busca?b_start:int=',intervalo_urls,'&end_date=&portal_type:list=Collection&portal_type:list=noticias.AbaEditoria&portal_type:list=noticias.Audio&portal_type:list=noticias.Banner&portal_type:list=noticias.Infografico&portal_type:list=noticias.Infomateria&portal_type:list=noticias.Materia&portal_type:list=noticias.Microblog&portal_type:list=noticias.MicroblogPost&portal_type:list=noticias.Video&portal_type:list=vocabulario.RegistroVocabularios&portal_type:list=vocabulario.TermoVocabulario&portal_type:list=vocabulario.Vocabulario&btnBuscaAvancada=&start_date=&SearchableText=',termo_pesquisa)
# lista <- as.data.frame(read_html(link) %>% html_nodes('a') %>% html_attr('href'))
# colnames(lista) <- 'link_col'
# busca_link <- lista %>% filter(str_detect(link_col, 'https://www12.senado.leg.br/noticias/materias/'))
# base_links <- bind_rows(base_links,busca_link)
}
print(intervalo_urls)
print('teste')
for (i in intervalo_urls) {
print('teste')
# link <- paste0('https://www12.senado.leg.br/noticias/@@busca?b_start:int=',intervalo_urls,'&end_date=&portal_type:list=Collection&portal_type:list=noticias.AbaEditoria&portal_type:list=noticias.Audio&portal_type:list=noticias.Banner&portal_type:list=noticias.Infografico&portal_type:list=noticias.Infomateria&portal_type:list=noticias.Materia&portal_type:list=noticias.Microblog&portal_type:list=noticias.MicroblogPost&portal_type:list=noticias.Video&portal_type:list=vocabulario.RegistroVocabularios&portal_type:list=vocabulario.TermoVocabulario&portal_type:list=vocabulario.Vocabulario&btnBuscaAvancada=&start_date=&SearchableText=',termo_pesquisa)
# lista <- as.data.frame(read_html(link) %>% html_nodes('a') %>% html_attr('href'))
# colnames(lista) <- 'link_col'
# busca_link <- lista %>% filter(str_detect(link_col, 'https://www12.senado.leg.br/noticias/materias/'))
# base_links <- bind_rows(base_links,busca_link)
}
intervalo_urls
intervalo_urls <- seq(from = 0L,
to = 2010,
by = 30)
intervalo_urls
for (i in intervalo_urls) {
print('teste')
# link <- paste0('https://www12.senado.leg.br/noticias/@@busca?b_start:int=',intervalo_urls,'&end_date=&portal_type:list=Collection&portal_type:list=noticias.AbaEditoria&portal_type:list=noticias.Audio&portal_type:list=noticias.Banner&portal_type:list=noticias.Infografico&portal_type:list=noticias.Infomateria&portal_type:list=noticias.Materia&portal_type:list=noticias.Microblog&portal_type:list=noticias.MicroblogPost&portal_type:list=noticias.Video&portal_type:list=vocabulario.RegistroVocabularios&portal_type:list=vocabulario.TermoVocabulario&portal_type:list=vocabulario.Vocabulario&btnBuscaAvancada=&start_date=&SearchableText=',termo_pesquisa)
# lista <- as.data.frame(read_html(link) %>% html_nodes('a') %>% html_attr('href'))
# colnames(lista) <- 'link_col'
# busca_link <- lista %>% filter(str_detect(link_col, 'https://www12.senado.leg.br/noticias/materias/'))
# base_links <- bind_rows(base_links,busca_link)
}
for (i in intervalo_urls) {
print(i)
# link <- paste0('https://www12.senado.leg.br/noticias/@@busca?b_start:int=',intervalo_urls,'&end_date=&portal_type:list=Collection&portal_type:list=noticias.AbaEditoria&portal_type:list=noticias.Audio&portal_type:list=noticias.Banner&portal_type:list=noticias.Infografico&portal_type:list=noticias.Infomateria&portal_type:list=noticias.Materia&portal_type:list=noticias.Microblog&portal_type:list=noticias.MicroblogPost&portal_type:list=noticias.Video&portal_type:list=vocabulario.RegistroVocabularios&portal_type:list=vocabulario.TermoVocabulario&portal_type:list=vocabulario.Vocabulario&btnBuscaAvancada=&start_date=&SearchableText=',termo_pesquisa)
# lista <- as.data.frame(read_html(link) %>% html_nodes('a') %>% html_attr('href'))
# colnames(lista) <- 'link_col'
# busca_link <- lista %>% filter(str_detect(link_col, 'https://www12.senado.leg.br/noticias/materias/'))
# base_links <- bind_rows(base_links,busca_link)
}
for (i in intervalo_urls) {
print(i)
link <- paste0('https://www12.senado.leg.br/noticias/@@busca?b_start:int=',intervalo_urls,'&end_date=&portal_type:list=Collection&portal_type:list=noticias.AbaEditoria&portal_type:list=noticias.Audio&portal_type:list=noticias.Banner&portal_type:list=noticias.Infografico&portal_type:list=noticias.Infomateria&portal_type:list=noticias.Materia&portal_type:list=noticias.Microblog&portal_type:list=noticias.MicroblogPost&portal_type:list=noticias.Video&portal_type:list=vocabulario.RegistroVocabularios&portal_type:list=vocabulario.TermoVocabulario&portal_type:list=vocabulario.Vocabulario&btnBuscaAvancada=&start_date=&SearchableText=',termo_pesquisa)
lista <- as.data.frame(read_html(link) %>% html_nodes('a') %>% html_attr('href'))
colnames(lista) <- 'link_col'
busca_link <- lista %>% filter(str_detect(link_col, 'https://www12.senado.leg.br/noticias/materias/'))
base_links <- bind_rows(base_links,busca_link)
}
link <- paste0('https://www12.senado.leg.br/noticias/@@busca?b_start:int=',intervalo_urls[i],'&end_date=&portal_type:list=Collection&portal_type:list=noticias.AbaEditoria&portal_type:list=noticias.Audio&portal_type:list=noticias.Banner&portal_type:list=noticias.Infografico&portal_type:list=noticias.Infomateria&portal_type:list=noticias.Materia&portal_type:list=noticias.Microblog&portal_type:list=noticias.MicroblogPost&portal_type:list=noticias.Video&portal_type:list=vocabulario.RegistroVocabularios&portal_type:list=vocabulario.TermoVocabulario&portal_type:list=vocabulario.Vocabulario&btnBuscaAvancada=&start_date=&SearchableText=',termo_pesquisa)
base_links <- data.frame()
for (i in intervalo_urls) {
print(i)
link <- paste0('https://www12.senado.leg.br/noticias/@@busca?b_start:int=',intervalo_urls[i],'&end_date=&portal_type:list=Collection&portal_type:list=noticias.AbaEditoria&portal_type:list=noticias.Audio&portal_type:list=noticias.Banner&portal_type:list=noticias.Infografico&portal_type:list=noticias.Infomateria&portal_type:list=noticias.Materia&portal_type:list=noticias.Microblog&portal_type:list=noticias.MicroblogPost&portal_type:list=noticias.Video&portal_type:list=vocabulario.RegistroVocabularios&portal_type:list=vocabulario.TermoVocabulario&portal_type:list=vocabulario.Vocabulario&btnBuscaAvancada=&start_date=&SearchableText=',termo_pesquisa)
lista <- as.data.frame(read_html(link) %>% html_nodes('a') %>% html_attr('href'))
colnames(lista) <- 'link_col'
busca_link <- lista %>% filter(str_detect(link_col, 'https://www12.senado.leg.br/noticias/materias/'))
base_links <- bind_rows(base_links,busca_link)
}
base_links <- data.frame()
for (i in intervalo_urls) {
print(i)
link <- paste0('https://www12.senado.leg.br/noticias/@@busca?b_start:int=0&end_date=&portal_type:list=Collection&portal_type:list=noticias.AbaEditoria&portal_type:list=noticias.Audio&portal_type:list=noticias.Banner&portal_type:list=noticias.Infografico&portal_type:list=noticias.Infomateria&portal_type:list=noticias.Materia&portal_type:list=noticias.Microblog&portal_type:list=noticias.MicroblogPost&portal_type:list=noticias.Video&portal_type:list=vocabulario.RegistroVocabularios&portal_type:list=vocabulario.TermoVocabulario&portal_type:list=vocabulario.Vocabulario&btnBuscaAvancada=&start_date=&SearchableText=',termo_pesquisa)
lista <- as.data.frame(read_html(link) %>% html_nodes('a') %>% html_attr('href'))
colnames(lista) <- 'link_col'
busca_link <- lista %>% filter(str_detect(link_col, 'https://www12.senado.leg.br/noticias/materias/'))
base_links <- bind_rows(base_links,busca_link)
}
intervalo_urls <- 0
intervalo_urls <- 0
library(rvest)
library(tidyverse)
termo_pesquisa <- 'Fernando Collor'
termo_pesquisa <- str_replace_all(string = termo_pesquisa,
pattern = ' ',
replacement = '+')
intervalo_urls <- 0
base_links <- data.frame()
while (intervalo_urls <= 2100) {
print(i)
link <- paste0('https://www12.senado.leg.br/noticias/@@busca?b_start:int=',intervalo_urls,'&end_date=&portal_type:list=Collection&portal_type:list=noticias.AbaEditoria&portal_type:list=noticias.Audio&portal_type:list=noticias.Banner&portal_type:list=noticias.Infografico&portal_type:list=noticias.Infomateria&portal_type:list=noticias.Materia&portal_type:list=noticias.Microblog&portal_type:list=noticias.MicroblogPost&portal_type:list=noticias.Video&portal_type:list=vocabulario.RegistroVocabularios&portal_type:list=vocabulario.TermoVocabulario&portal_type:list=vocabulario.Vocabulario&btnBuscaAvancada=&start_date=&SearchableText=',termo_pesquisa)
lista <- as.data.frame(read_html(link) %>% html_nodes('a') %>% html_attr('href'))
colnames(lista) <- 'link_col'
busca_link <- lista %>% filter(str_detect(link_col, 'https://www12.senado.leg.br/noticias/materias/'))
base_links <- bind_rows(base_links,busca_link)
intervalo_urls <- intervalo_urls + 30
}
base_links <- data.frame()
while (intervalo_urls <= 2100) {
link <- paste0('https://www12.senado.leg.br/noticias/@@busca?b_start:int=',intervalo_urls,'&end_date=&portal_type:list=Collection&portal_type:list=noticias.AbaEditoria&portal_type:list=noticias.Audio&portal_type:list=noticias.Banner&portal_type:list=noticias.Infografico&portal_type:list=noticias.Infomateria&portal_type:list=noticias.Materia&portal_type:list=noticias.Microblog&portal_type:list=noticias.MicroblogPost&portal_type:list=noticias.Video&portal_type:list=vocabulario.RegistroVocabularios&portal_type:list=vocabulario.TermoVocabulario&portal_type:list=vocabulario.Vocabulario&btnBuscaAvancada=&start_date=&SearchableText=',termo_pesquisa)
lista <- as.data.frame(read_html(link) %>% html_nodes('a') %>% html_attr('href'))
colnames(lista) <- 'link_col'
busca_link <- lista %>% filter(str_detect(link_col, 'https://www12.senado.leg.br/noticias/materias/'))
base_links <- bind_rows(base_links,busca_link)
intervalo_urls <- intervalo_urls + 30
}
link_base <- paste0('https://www12.senado.leg.br/noticias/@@busca?b_start:int=',intervalo_urls,'&end_date=&portal_type:list=Collection&portal_type:list=noticias.AbaEditoria&portal_type:list=noticias.Audio&portal_type:list=noticias.Banner&portal_type:list=noticias.Infografico&portal_type:list=noticias.Infomateria&portal_type:list=noticias.Materia&portal_type:list=noticias.Microblog&portal_type:list=noticias.MicroblogPost&portal_type:list=noticias.Video&portal_type:list=vocabulario.RegistroVocabularios&portal_type:list=vocabulario.TermoVocabulario&portal_type:list=vocabulario.Vocabulario&btnBuscaAvancada=&start_date=&SearchableText=',termo_pesquisa)
library(rvest)
library(tidyverse)
termo_pesquisa <- 'Fernando Collor'
termo_pesquisa <- str_replace_all(string = termo_pesquisa,
pattern = ' ',
replacement = '+')
intervalo_urls <- 0
link <- paste0('https://www12.senado.leg.br/noticias/@@busca?b_start:int=',intervalo_urls,'&end_date=&portal_type:list=Collection&portal_type:list=noticias.AbaEditoria&portal_type:list=noticias.Audio&portal_type:list=noticias.Banner&portal_type:list=noticias.Infografico&portal_type:list=noticias.Infomateria&portal_type:list=noticias.Materia&portal_type:list=noticias.Microblog&portal_type:list=noticias.MicroblogPost&portal_type:list=noticias.Video&portal_type:list=vocabulario.RegistroVocabularios&portal_type:list=vocabulario.TermoVocabulario&portal_type:list=vocabulario.Vocabulario&btnBuscaAvancada=&start_date=&SearchableText=',termo_pesquisa)
base_links <- data.frame()
while (length(try(lista <- as.data.frame(read_html(link) %>% html_nodes('a') %>% html_attr('href')))) >= 1) {
colnames(lista) <- 'link_col'
busca_link <- lista %>% filter(str_detect(link_col, 'https://www12.senado.leg.br/noticias/materias/'))
base_links <- bind_rows(base_links,busca_link)
intervalo_urls <- intervalo_urls + 30
link <- paste0('https://www12.senado.leg.br/noticias/@@busca?b_start:int=',intervalo_urls,'&end_date=&portal_type:list=Collection&portal_type:list=noticias.AbaEditoria&portal_type:list=noticias.Audio&portal_type:list=noticias.Banner&portal_type:list=noticias.Infografico&portal_type:list=noticias.Infomateria&portal_type:list=noticias.Materia&portal_type:list=noticias.Microblog&portal_type:list=noticias.MicroblogPost&portal_type:list=noticias.Video&portal_type:list=vocabulario.RegistroVocabularios&portal_type:list=vocabulario.TermoVocabulario&portal_type:list=vocabulario.Vocabulario&btnBuscaAvancada=&start_date=&SearchableText=',termo_pesquisa)
}
intervalo_urls <- 0
link <- paste0('https://www12.senado.leg.br/noticias/@@busca?b_start:int=',intervalo_urls,'&end_date=&portal_type:list=Collection&portal_type:list=noticias.AbaEditoria&portal_type:list=noticias.Audio&portal_type:list=noticias.Banner&portal_type:list=noticias.Infografico&portal_type:list=noticias.Infomateria&portal_type:list=noticias.Materia&portal_type:list=noticias.Microblog&portal_type:list=noticias.MicroblogPost&portal_type:list=noticias.Video&portal_type:list=vocabulario.RegistroVocabularios&portal_type:list=vocabulario.TermoVocabulario&portal_type:list=vocabulario.Vocabulario&btnBuscaAvancada=&start_date=&SearchableText=',termo_pesquisa)
base_links <- data.frame()
while (length(try(lista <- as.data.frame(read_html(link) %>% html_nodes('a') %>% html_attr('href')))) >= 1) {
colnames(lista) <- 'link_col'
busca_link <- lista %>% filter(str_detect(link_col, 'https://www12.senado.leg.br/noticias/materias/'))
base_links <- bind_rows(base_links,busca_link)
intervalo_urls <- intervalo_urls + 30
print(paste0('Intervalo URL em: ', intervalo_urls))
link <- paste0('https://www12.senado.leg.br/noticias/@@busca?b_start:int=',intervalo_urls,'&end_date=&portal_type:list=Collection&portal_type:list=noticias.AbaEditoria&portal_type:list=noticias.Audio&portal_type:list=noticias.Banner&portal_type:list=noticias.Infografico&portal_type:list=noticias.Infomateria&portal_type:list=noticias.Materia&portal_type:list=noticias.Microblog&portal_type:list=noticias.MicroblogPost&portal_type:list=noticias.Video&portal_type:list=vocabulario.RegistroVocabularios&portal_type:list=vocabulario.TermoVocabulario&portal_type:list=vocabulario.Vocabulario&btnBuscaAvancada=&start_date=&SearchableText=',termo_pesquisa)
}
library(rvest)
library(tidyverse)
termo_pesquisa <- 'Fernando Collor'
termo_pesquisa <- str_replace_all(string = termo_pesquisa,
pattern = ' ',
replacement = '+')
intervalo_urls <- 0
link <- paste0('https://www12.senado.leg.br/noticias/@@busca?b_start:int=',intervalo_urls,'&end_date=&portal_type:list=Collection&portal_type:list=noticias.AbaEditoria&portal_type:list=noticias.Audio&portal_type:list=noticias.Banner&portal_type:list=noticias.Infografico&portal_type:list=noticias.Infomateria&portal_type:list=noticias.Materia&portal_type:list=noticias.Microblog&portal_type:list=noticias.MicroblogPost&portal_type:list=noticias.Video&portal_type:list=vocabulario.RegistroVocabularios&portal_type:list=vocabulario.TermoVocabulario&portal_type:list=vocabulario.Vocabulario&btnBuscaAvancada=&start_date=&SearchableText=',termo_pesquisa)
base_links <- data.frame()
while (length(try(lista <- as.data.frame(read_html(link) %>% html_nodes('a') %>% html_attr('href')))) >= 1) {
colnames(lista) <- 'link_col'
busca_link <- lista %>% filter(str_detect(link_col, 'https://www12.senado.leg.br/noticias/materias/'))
base_links <- bind_rows(base_links,busca_link)
intervalo_urls <- intervalo_urls + 30
print(paste0('Intervalo URL em: ', intervalo_urls))
link <- paste0('https://www12.senado.leg.br/noticias/@@busca?b_start:int=',intervalo_urls,'&end_date=&portal_type:list=Collection&portal_type:list=noticias.AbaEditoria&portal_type:list=noticias.Audio&portal_type:list=noticias.Banner&portal_type:list=noticias.Infografico&portal_type:list=noticias.Infomateria&portal_type:list=noticias.Materia&portal_type:list=noticias.Microblog&portal_type:list=noticias.MicroblogPost&portal_type:list=noticias.Video&portal_type:list=vocabulario.RegistroVocabularios&portal_type:list=vocabulario.TermoVocabulario&portal_type:list=vocabulario.Vocabulario&btnBuscaAvancada=&start_date=&SearchableText=',termo_pesquisa)
}
intervalo_urls <- 0
link <- paste0('https://www12.senado.leg.br/noticias/@@busca?b_start:int=',intervalo_urls,'&end_date=&portal_type:list=Collection&portal_type:list=noticias.AbaEditoria&portal_type:list=noticias.Audio&portal_type:list=noticias.Banner&portal_type:list=noticias.Infografico&portal_type:list=noticias.Infomateria&portal_type:list=noticias.Materia&portal_type:list=noticias.Microblog&portal_type:list=noticias.MicroblogPost&portal_type:list=noticias.Video&portal_type:list=vocabulario.RegistroVocabularios&portal_type:list=vocabulario.TermoVocabulario&portal_type:list=vocabulario.Vocabulario&btnBuscaAvancada=&start_date=&SearchableText=',termo_pesquisa)
base_links <- data.frame()
while (length(try(lista <- as.data.frame(read_html(link) %>% html_nodes('a') %>% html_attr('href')))) >= 1) {
colnames(lista) <- 'link_col'
busca_link <- lista %>% filter(str_detect(link_col, 'https://www12.senado.leg.br/noticias/materias/'))
base_links <- bind_rows(base_links,busca_link)
intervalo_urls <- intervalo_urls + 30
print(paste0('Intervalo URL em: ', intervalo_urls))
link <- paste0('https://www12.senado.leg.br/noticias/@@busca?b_start:int=',intervalo_urls,'&end_date=&portal_type:list=Collection&portal_type:list=noticias.AbaEditoria&portal_type:list=noticias.Audio&portal_type:list=noticias.Banner&portal_type:list=noticias.Infografico&portal_type:list=noticias.Infomateria&portal_type:list=noticias.Materia&portal_type:list=noticias.Microblog&portal_type:list=noticias.MicroblogPost&portal_type:list=noticias.Video&portal_type:list=vocabulario.RegistroVocabularios&portal_type:list=vocabulario.TermoVocabulario&portal_type:list=vocabulario.Vocabulario&btnBuscaAvancada=&start_date=&SearchableText=',termo_pesquisa)
}
View(lista)
library(rvest)
library(tidyverse)
termo_pesquisa <- 'Fernando Collor'
termo_pesquisa <- str_replace_all(string = termo_pesquisa,
pattern = ' ',
replacement = '+')
intervalo_urls <- 0
link <- paste0('https://www12.senado.leg.br/noticias/@@busca?b_start:int=',intervalo_urls,'&end_date=&portal_type:list=Collection&portal_type:list=noticias.AbaEditoria&portal_type:list=noticias.Audio&portal_type:list=noticias.Banner&portal_type:list=noticias.Infografico&portal_type:list=noticias.Infomateria&portal_type:list=noticias.Materia&portal_type:list=noticias.Microblog&portal_type:list=noticias.MicroblogPost&portal_type:list=noticias.Video&portal_type:list=vocabulario.RegistroVocabularios&portal_type:list=vocabulario.TermoVocabulario&portal_type:list=vocabulario.Vocabulario&btnBuscaAvancada=&start_date=&SearchableText=',termo_pesquisa)
base_links <- data.frame()
while (length(try(lista <- as.data.frame(read_html(link) %>% html_nodes('a') %>% html_attr('href')))) >= 1) {
colnames(lista) <- 'link_col'
if (nrow(busca_link <- lista %>% filter(str_detect(link_col, 'https://www12.senado.leg.br/noticias/materias/'))) <= 30) {
break()
}
base_links <- bind_rows(base_links,busca_link)
intervalo_urls <- intervalo_urls + 30
print(paste0('Intervalo URL em: ', intervalo_urls))
link <- paste0('https://www12.senado.leg.br/noticias/@@busca?b_start:int=',intervalo_urls,'&end_date=&portal_type:list=Collection&portal_type:list=noticias.AbaEditoria&portal_type:list=noticias.Audio&portal_type:list=noticias.Banner&portal_type:list=noticias.Infografico&portal_type:list=noticias.Infomateria&portal_type:list=noticias.Materia&portal_type:list=noticias.Microblog&portal_type:list=noticias.MicroblogPost&portal_type:list=noticias.Video&portal_type:list=vocabulario.RegistroVocabularios&portal_type:list=vocabulario.TermoVocabulario&portal_type:list=vocabulario.Vocabulario&btnBuscaAvancada=&start_date=&SearchableText=',termo_pesquisa)
}
library(rvest)
library(tidyverse)
termo_pesquisa <- 'Fernando Collor'
termo_pesquisa <- str_replace_all(string = termo_pesquisa,
pattern = ' ',
replacement = '+')
intervalo_urls <- 0
link <- paste0('https://www12.senado.leg.br/noticias/@@busca?b_start:int=',intervalo_urls,'&end_date=&portal_type:list=Collection&portal_type:list=noticias.AbaEditoria&portal_type:list=noticias.Audio&portal_type:list=noticias.Banner&portal_type:list=noticias.Infografico&portal_type:list=noticias.Infomateria&portal_type:list=noticias.Materia&portal_type:list=noticias.Microblog&portal_type:list=noticias.MicroblogPost&portal_type:list=noticias.Video&portal_type:list=vocabulario.RegistroVocabularios&portal_type:list=vocabulario.TermoVocabulario&portal_type:list=vocabulario.Vocabulario&btnBuscaAvancada=&start_date=&SearchableText=',termo_pesquisa)
base_links <- data.frame()
while (length(try(lista <- as.data.frame(read_html(link) %>% html_nodes('a') %>% html_attr('href')))) >= 1) {
colnames(lista) <- 'link_col'
if (nrow(busca_link <- lista %>% filter(str_detect(link_col, 'https://www12.senado.leg.br/noticias/materias/'))) <= 30) {
break()
}
base_links <- bind_rows(base_links,busca_link)
intervalo_urls <- intervalo_urls + 30
print(paste0('Intervalo URL em: ', intervalo_urls))
link <- paste0('https://www12.senado.leg.br/noticias/@@busca?b_start:int=',intervalo_urls,'&end_date=&portal_type:list=Collection&portal_type:list=noticias.AbaEditoria&portal_type:list=noticias.Audio&portal_type:list=noticias.Banner&portal_type:list=noticias.Infografico&portal_type:list=noticias.Infomateria&portal_type:list=noticias.Materia&portal_type:list=noticias.Microblog&portal_type:list=noticias.MicroblogPost&portal_type:list=noticias.Video&portal_type:list=vocabulario.RegistroVocabularios&portal_type:list=vocabulario.TermoVocabulario&portal_type:list=vocabulario.Vocabulario&btnBuscaAvancada=&start_date=&SearchableText=',termo_pesquisa)
}
library(rvest)
library(tidyverse)
termo_pesquisa <- 'Fernando Collor'
termo_pesquisa <- str_replace_all(string = termo_pesquisa,
pattern = ' ',
replacement = '+')
intervalo_urls <- 0
link <- paste0('https://www12.senado.leg.br/noticias/@@busca?b_start:int=',intervalo_urls,'&end_date=&portal_type:list=Collection&portal_type:list=noticias.AbaEditoria&portal_type:list=noticias.Audio&portal_type:list=noticias.Banner&portal_type:list=noticias.Infografico&portal_type:list=noticias.Infomateria&portal_type:list=noticias.Materia&portal_type:list=noticias.Microblog&portal_type:list=noticias.MicroblogPost&portal_type:list=noticias.Video&portal_type:list=vocabulario.RegistroVocabularios&portal_type:list=vocabulario.TermoVocabulario&portal_type:list=vocabulario.Vocabulario&btnBuscaAvancada=&start_date=&SearchableText=',termo_pesquisa)
base_links <- data.frame()
while (length(try(lista <- as.data.frame(read_html(link) %>% html_nodes('a') %>% html_attr('href')))) >= 1) {
colnames(lista) <- 'link_col'
if (nrow(busca_link <- lista %>% filter(str_detect(link_col, 'https://www12.senado.leg.br/noticias/materias/'))) == 30) {
break()
}
base_links <- bind_rows(base_links,busca_link)
intervalo_urls <- intervalo_urls + 30
print(paste0('Intervalo URL em: ', intervalo_urls))
link <- paste0('https://www12.senado.leg.br/noticias/@@busca?b_start:int=',intervalo_urls,'&end_date=&portal_type:list=Collection&portal_type:list=noticias.AbaEditoria&portal_type:list=noticias.Audio&portal_type:list=noticias.Banner&portal_type:list=noticias.Infografico&portal_type:list=noticias.Infomateria&portal_type:list=noticias.Materia&portal_type:list=noticias.Microblog&portal_type:list=noticias.MicroblogPost&portal_type:list=noticias.Video&portal_type:list=vocabulario.RegistroVocabularios&portal_type:list=vocabulario.TermoVocabulario&portal_type:list=vocabulario.Vocabulario&btnBuscaAvancada=&start_date=&SearchableText=',termo_pesquisa)
}
intervalo_urls <- 0
link <- paste0('https://www12.senado.leg.br/noticias/@@busca?b_start:int=',intervalo_urls,'&end_date=&portal_type:list=Collection&portal_type:list=noticias.AbaEditoria&portal_type:list=noticias.Audio&portal_type:list=noticias.Banner&portal_type:list=noticias.Infografico&portal_type:list=noticias.Infomateria&portal_type:list=noticias.Materia&portal_type:list=noticias.Microblog&portal_type:list=noticias.MicroblogPost&portal_type:list=noticias.Video&portal_type:list=vocabulario.RegistroVocabularios&portal_type:list=vocabulario.TermoVocabulario&portal_type:list=vocabulario.Vocabulario&btnBuscaAvancada=&start_date=&SearchableText=',termo_pesquisa)
base_links <- data.frame()
while (length(try(lista <- as.data.frame(read_html(link) %>% html_nodes('a') %>% html_attr('href')))) >= 1) {
colnames(lista) <- 'link_col'
if (nrow(busca_link <- lista %>% filter(str_detect(link_col, 'https://www12.senado.leg.br/noticias/materias/'))) == 30) {
break()
}
base_links <- bind_rows(base_links,busca_link)
intervalo_urls <- intervalo_urls + 30
print(paste0('Intervalo URL em: ', intervalo_urls))
link <- paste0('https://www12.senado.leg.br/noticias/@@busca?b_start:int=',intervalo_urls,'&end_date=&portal_type:list=Collection&portal_type:list=noticias.AbaEditoria&portal_type:list=noticias.Audio&portal_type:list=noticias.Banner&portal_type:list=noticias.Infografico&portal_type:list=noticias.Infomateria&portal_type:list=noticias.Materia&portal_type:list=noticias.Microblog&portal_type:list=noticias.MicroblogPost&portal_type:list=noticias.Video&portal_type:list=vocabulario.RegistroVocabularios&portal_type:list=vocabulario.TermoVocabulario&portal_type:list=vocabulario.Vocabulario&btnBuscaAvancada=&start_date=&SearchableText=',termo_pesquisa)
}
base_final <- data.frame()
View(base_links)
for (i in 1:nrow(base_links)) {
link_materia <- base_links$link_col[i]
titulo <- read_html(link_materia) %>% html_nodes('h1') %>% html_text()
conteudo <- read_html(link_materia) %>% html_nodes('p') %>% html_text()
data <- regmatches(conteudo[2], gregexpr("[[:digit:]]+", conteudo[2]))
data <- lubridate::as_date(paste0(data[[1]][2],'-',data[[1]][2],'-',data[[1]][1]))
tamanho_conteudo <- length(conteudo)
conteudo <- str_flatten(conteudo[3:(tamanho_conteudo-4)])
base_passagem <- data.frame(data,titulo,conteudo,link_materia)
base_final <- bind_rows(base_final, base_passagem)
}
View(base_final)
library(rvest)
library(tidyverse)
termo_pesquisa <- 'Fernando Collor'
termo_pesquisa <- str_replace_all(string = termo_pesquisa,
pattern = ' ',
replacement = '+')
intervalo_urls <- seq(from = 0L,
to = 2010,
by = 30)
base_links <- data.frame()
for (i in intervalo_urls) {
link <- paste0('https://www12.senado.leg.br/noticias/busca?b_start:int=',i,'&SearchableText=',termo_pesquisa)
lista <- as.data.frame(read_html(link) %>% html_nodes('a') %>% html_attr('href'))
colnames(lista) <- 'link_col'
busca_link <- lista %>% filter(str_detect(link_col, 'https://www12.senado.leg.br/noticias/materias/'))
base_links <- bind_rows(base_links,busca_link)
}
base_final <- data.frame()
base_final <- data.frame()
for (i in 1:nrow(base_links)) {
link_materia <- base_links$link_col[i]
titulo <- read_html(link_materia) %>% html_nodes('h1') %>% html_text()
conteudo <- read_html(link_materia) %>% html_nodes('p') %>% html_text()
data <- regmatches(conteudo[2], gregexpr("[[:digit:]]+", conteudo[2]))
data <- lubridate::as_date(paste0(data[[1]][2],'-',data[[1]][2],'-',data[[1]][1]))
tamanho_conteudo <- length(conteudo)
conteudo <- str_flatten(conteudo[3:(tamanho_conteudo-4)])
base_passagem <- data.frame(data,titulo,conteudo,link_materia)
base_final <- bind_rows(base_final, base_passagem)
}
base_final <- base_final %>% filter(str_detect(conteudo, str_replace_all(string = termo_pesquisa,
pattern = '+',
replacement = ' ')))
base_final <- base_final %>% filter(str_detect(conteudo, str_replace_all(string = termo_pesquisa,
pattern = '\\+',
replacement = ' ')))
View(base_final)
base_final$link_materia[23]
base_final$link_materia[1765]
library(rvest)
library(tidyverse)
#### termo a ser pesquisado
termo_pesquisa <- 'Fernando Collor'
termo_pesquisa <- str_replace_all(string = termo_pesquisa,
pattern = ' ',
replacement = '+')
#### busca links das materias
intervalo_urls <- seq(from = 0L,
to = 2010,
by = 30)
base_links <- data.frame()
for (i in intervalo_urls) {
link <- paste0('https://www12.senado.leg.br/noticias/busca?b_start:int=',i,'&SearchableText=',termo_pesquisa)
lista <- as.data.frame(read_html(link) %>% html_nodes('a') %>% html_attr('href'))
colnames(lista) <- 'link_col'
busca_link <- lista %>% filter(str_detect(link_col, 'https://www12.senado.leg.br/noticias/materias/'))
base_links <- bind_rows(base_links,busca_link)
}
library(rvest)
library(tidyverse)
#### termo a ser pesquisado
termo_pesquisa <- 'Fernando Collor'
termo_pesquisa <- str_replace_all(string = termo_pesquisa,
pattern = ' ',
replacement = '+')
#### busca links das materias
intervalo_urls <- seq(from = 0L,
to = 2010,
by = 30)
base_links <- data.frame()
for (i in intervalo_urls) {
link <- paste0('https://www12.senado.leg.br/noticias/busca?b_start:int=',i,'&SearchableText=',termo_pesquisa)
lista <- as.data.frame(read_html(link) %>% html_nodes('a') %>% html_attr('href'))
colnames(lista) <- 'link_col'
busca_link <- lista %>% filter(str_detect(link_col, 'https://www12.senado.leg.br/noticias/materias/'))
base_links <- bind_rows(base_links,busca_link)
}
View(base_links)
View(busca_link)
View(lista)
library(rvest)
library(tidyverse)
#### termo a ser pesquisado
termo_pesquisa <- 'Fernando Collor'
termo_pesquisa <- str_replace_all(string = termo_pesquisa,
pattern = ' ',
replacement = '+')
#### busca links das materias
intervalo_urls <- seq(from = 0L,
to = 2010,
by = 30)
base_links <- data.frame()
for (i in intervalo_urls) {
link <- paste0('https://www12.senado.leg.br/noticias/busca?b_start:int=',i,'&SearchableText=',termo_pesquisa)
lista <- as.data.frame(read_html(link) %>% html_nodes('a') %>% html_attr('href'))
colnames(lista) <- 'link_col'
busca_link <- lista %>% filter(str_detect(link_col, 'https://www12.senado.leg.br/noticias/materias/'))
base_links <- bind_rows(base_links,busca_link)
}
#### faz as raspagens e monta o dataframe
base_final <- data.frame()
for (i in 1:nrow(base_links)) {
link_materia <- base_links$link_col[i]
titulo <- read_html(link_materia) %>% html_nodes('h1') %>% html_text()
conteudo <- read_html(link_materia) %>% html_nodes('p') %>% html_text()
data <- regmatches(conteudo[2], gregexpr("[[:digit:]]+", conteudo[2]))
data <- lubridate::as_date(paste0(data[[1]][2],'-',data[[1]][2],'-',data[[1]][1]))
tamanho_conteudo <- length(conteudo)
conteudo <- str_flatten(conteudo[3:(tamanho_conteudo-4)])
base_passagem <- data.frame(data,titulo,conteudo,link_materia)
base_final <- bind_rows(base_final, base_passagem)
}
View(base_passagem)
